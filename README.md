
# Interval Timer Experiment

This project was completed as part of Course work in **Embedded System Design** at California State University, Fresno.  
It demonstrates how to use the **Interval Timer** with a **Nios II processor** on the **DE1-SoC FPGA board**.  

The work is divided into three parts:
- **Part A:** Stopwatch â€“ measure how long a button is pressed  
- **Part B:** Timeout Detection â€“ detect 5 seconds of inactivity  
- **Part C:** Period Measurement & Repeat â€“ measure time between two presses and repeat every 5 seconds  

---

## ğŸ“‚ Repository Structure

/quartus_project

â”œâ”€â”€ binduhw3.qpf # Quartus project file

â”œâ”€â”€ binduhw3.qsf # Pin assignments for DE1-SoC

â”œâ”€â”€ binduhw3.qsys # Platform Designer system

â”œâ”€â”€ binduhw3.sopcinfo # SOPC system info

â”œâ”€â”€ binduhw3.qip # Quartus IP file

â”œâ”€â”€ binduhw3.v # System HDL wrapper

â””â”€â”€ top.v # Top-level module (board I/O mapping)

â””â”€â”€binduhw3_time_limited.sof ( # Board programming file (time-limited OpenCore Plus build)

/software

â”œâ”€â”€ stopwatch.c # Part A: Stopwatch

â”œâ”€â”€ watchdog.c # Part B: Timeout detection

â””â”€â”€ period.c # Part C: Period measurement & repeat

/report

â””â”€â”€ ECE_278_homework3.pdf # Final report


---

## ğŸ›  Hardware System

- **CPU:** `nios2_gen2_0`  
- **Timers:**  
  - `high_resol_timer_1` â†’ used with timestamp API (Parts A, B)  
  - `timer_0` â†’ used with direct register access (Part C)  
- **Peripherals:**  
  - `leds` â€“ 10 red LEDs  
  - `keys` â€“ 4 push buttons (active-low)  
  - `hex0`, `hex1`, `hex2`, `hex3`, `hex_4`, `hex_5` â€“ six 7-seg displays  
  - `sdram` â€“ external memory  
  - `jtag_uart_0` â€“ console I/O  
- **Top entity:** `top.v` connects board I/O to the system  
- **Pin file:** `binduhw3.qsf` assigns pins for DE1-SoC  

---

## ğŸ’» Software Programs

### Part A â€“ Stopwatch (`stopwatch.c`)
- Uses **timestamp API** (`alt_timestamp_start()`, `alt_timestamp_freq()`)  
- **KEY2:** press â†’ start, release â†’ stop  
- Elapsed time:  
  - Lower bits on `LEDR[9:0]`  
  - Full value on HEX displays (`HEX0â€“HEX5`)  

### Part B â€“ Timeout Detection (`watchdog.c`)
- Tracks inactivity with **timestamp API**  
- If **KEY3** not pressed for 5 seconds â†’ `LEDR9` turns on  
- Pressing KEY3 clears LEDR9 and restarts timer  

### Part C â€“ Period Measurement & Repeat (`period.c`)
- Uses **Interval Timer registers** at `TIMER_0_BASE`  
- **KEY1:** first press â†’ `t1`, second press â†’ `t2`  
- Displays duration in ticks and approx. seconds  
- Then repeats every 5 seconds: `LEDR7` blinks to show cycle  

---

## â–¶ï¸ How to Run

1. Open **Quartus Prime 18.1**  
2. Load `binduhw3.qpf` â†’ Platform Designer (qsys) â†’  Generate HDL
3. In Quartus prime â†’ Compile top level module â†’ Generate `.sof` file  
4. Program the DE1-SoC board with USB-Blaster
5. In **Nios II SBT for Eclipse**:  
   - Create separate **BSP + Application** for each file:  
     - `stopwatch.c`  
     - `watchdog.c`  
     - `period.c`  
   - Build and run each application  
6. Test on board using push buttons and observe LED/HEX outputs  

Note: The `.sof` file in this repository (`binduhw3_time_limited.sof`) is a 
time-limited **OpenCore Plus** programming file generated by Quartus Prime Lite.  
It works for demonstration on the DE1-SoC board but is evaluation-licensed.

---
## ğŸ“‘ Report

The full report with diagrams, results, and explanations is here:  
[`/report/ECE_278_homework3.pdf`](report/ECE_278_homework3.pdf)

---

## ğŸ“ Key Learnings

- Configuring and using the **Interval Timer** in both HAL API and register modes  
- Handling active-low push buttons and driving LEDs/HEX displays  
- Creating clean BSP + Application projects for different use-cases  
- End-to-end workflow: Quartus â†’ Platform Designer â†’ Nios II  


https://drive.google.com/file/d/11NWKZFB3jSmU6Wi7Rp_fUm9wV7M1lwJE/view

drive link for vedio

